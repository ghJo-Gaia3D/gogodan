<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>콤보박스 이벤트</title>
        <script>
            window.onload = function() {
                let first = document.getElementById('first');
                let second = document.getElementById('second');
                second.addEventListener('change', makeBox);

                setNumber(first);
                setNumber(second);
            }
			
			// select박스 change 함수
			function changeSelect(event){
				console.log(event)
				let target = event.target;
				console.log(target);
				let value = target.value;
				console.log(target.value);
				let td = target.parentElement;
				let tr = td.parentElement;
				let siblings = tr.querySelectorAll('td > select');
				console.log(siblings);
			}
			
            function setNumber(node) {
                for(let s = 0; s < 5; s++) {
                    let value = s + 1;
                    let newOption = document.createElement('option');
                    newOption.setAttribute('value', value);
                    newOption.text = value;
                    node.appendChild(newOption);
                }
            }

            function makeBox() {
                delBox();

                let first = document.getElementById('first').value;
                let second = document.getElementById('second').value;
                let result = document.getElementById('result');

                let makeTable = document.createElement('table');
                makeTable.setAttribute('border', 1); 

                for(let j = 1; j <= second; j++) {
                    let makeTr = document.createElement('tr');
                    
                    
                    for(let i =1; i <= first; i++) {
                        let makeTd = document.createElement('td');

                        let secSelect = document.createElement('select');
                        secSelect.setAttribute('id', "selectResult");

                        for(let k = 1; k <= second; k++) {
                            let secOption = document.createElement('option');
                            secOption.setAttribute('value', k);
                            secOption.text = k +" , " + k;
							
							// 이벤트 핸들링
							secSelect.addEventListener('change', changeSelect);
							
                            secSelect.appendChild(secOption);
                        }
                        makeTd.appendChild(secSelect);
                        makeTr.appendChild(makeTd);
                    }
					makeTable.appendChild(makeTr);
                }
                result.appendChild(makeTable);
            }

            function delBox() {
                let delResult = document.getElementById('result');
                while (delResult.hasChildNodes()) {
                    delResult.removeChild(delResult.firstChild);
                }
            }

            function updateTable() {

            }

        </script>
    </head>
    <body>
        <select id="first"></select>
        <span>X</span>
        <select id="second"></select>

        <div id="result"></div>
    </body>
</html>